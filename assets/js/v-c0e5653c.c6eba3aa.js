"use strict";(self.webpackChunkxiaoteng=self.webpackChunkxiaoteng||[]).push([[1247],{3010:(e,n,r)=>{r.r(n),r.d(n,{data:()=>i});const i={key:"v-c0e5653c",path:"/python/python_basics/built_in_module/csv-model.html",title:"csv 模块",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"普通读写文件",slug:"普通读写文件",children:[]},{level:2,title:"按dict读写文件",slug:"按dict读写文件",children:[]},{level:2,title:"其他",slug:"其他",children:[]},{level:2,title:"读写超大文件时",slug:"读写超大文件时",children:[]}],filePathRelative:"python/python_basics/built_in_module/csv-model.md",git:{updatedTime:1631876121e3,contributors:[{name:"maxiaoteng",email:"jizhuwo00@hotmail.com",commits:1}]}}},4754:(e,n,r)=>{r.r(n),r.d(n,{default:()=>c});var i=r(6252);const a=(0,i.uE)('<h1 id="csv-模块" tabindex="-1"><a class="header-anchor" href="#csv-模块" aria-hidden="true">#</a> csv 模块</h1><p>csv用来读写csv文件</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>import csv\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="普通读写文件" tabindex="-1"><a class="header-anchor" href="#普通读写文件" aria-hidden="true">#</a> 普通读写文件</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>with open(origin_path,&#39;r&#39;,encoding=&#39;utf-8&#39;) as fr:\n      csv_reader=csv.reader(fr)\n      addresses={}\n      for row in csv_reader:\n            if csv_reader.line_num==1:\n                  continue\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="按dict读写文件" tabindex="-1"><a class="header-anchor" href="#按dict读写文件" aria-hidden="true">#</a> 按dict读写文件</h2><ul><li><p>写文件 <code> if not os.path.exists(data_path): with open(data_path, &#39;w&#39;, encoding=&#39;utf-8&#39;, newline=&#39;&#39;) as f: csv_writer = csv.DictWriter(f, fieldnames=field) csv_writer.writeheader() with open(data_path, &#39;a&#39;, encoding=&#39;utf-8&#39;, newline=&#39;&#39;) as f: csv_writer = csv.DictWriter(f, fieldnames=field) csv_writer.writerow(item) </code></p></li><li><p>读文件 读取的row类型: <code>collections.OrderedDict</code>, 有get属性, 使用dict(row)转为普通dict <code> with open(author_links_path, &#39;r&#39;, encoding=&#39;utf-8&#39;, newline=&#39;&#39;) as f: csv_reader = csv.DictReader(f, fieldnames=self.author_link_field) for row in csv_reader: if csv_reader.line_num == 1: continue links.append(dict(row)) </code></p></li></ul><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h2><p>用在csv的read和writer方法,</p><ul><li>delimiter=&#39;,&#39; # 分隔符</li><li>quotechar=&#39;&quot;&#39; # 引用符, 将内容用引号包含,避免歧义</li></ul><h2 id="读写超大文件时" tabindex="-1"><a class="header-anchor" href="#读写超大文件时" aria-hidden="true">#</a> 读写超大文件时</h2>',11),t={href:"https://stackoverflow.com/questions/15063936/csv-error-field-larger-than-field-limit-131072",target:"_blank",rel:"noopener noreferrer"},l=(0,i.Uk)("参考stackoverflow"),s=(0,i._)("ul",null,[(0,i._)("li",null,[(0,i._)("p",null,"报错: _csv.Error: field larger than field limit (131072) - 原因: csv文件包含特别大的field, 需要修改最大显示 - 解决代码 ``` import sys import csv maxInt = sys.maxsize decrement = True"),(0,i._)("pre",null,[(0,i._)("code",null,"      while decrement:\n      # decrease the maxInt value by factor 10 \n      # as long as the OverflowError occurs.\n\n      decrement = False\n      try:\n            csv.field_size_limit(maxInt)\n      except OverflowError:\n            maxInt = int(maxInt/10)\n            decrement = True\n```\n")])])],-1),c={render:function(e,n){const r=(0,i.up)("OutboundLink");return(0,i.wg)(),(0,i.iD)(i.HY,null,[a,(0,i._)("p",null,[(0,i._)("a",t,[l,(0,i.Wm)(r)])]),s],64)}}}}]);