"use strict";(self.webpackChunkxiaoteng=self.webpackChunkxiaoteng||[]).push([[2667],{8691:(e,s,n)=>{n.r(s),n.d(s,{data:()=>a});const a={key:"v-6f75c3fb",path:"/python/python_web/django/views.html",title:"views",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"1. django orm三种查询方法",slug:"_1-django-orm三种查询方法",children:[]},{level:2,title:"2. views三种返回",slug:"_2-views三种返回",children:[]},{level:2,title:"3. 对cookie和session的处理",slug:"_3-对cookie和session的处理",children:[]},{level:2,title:"4. request的几个属性",slug:"_4-request的几个属性",children:[]}],filePathRelative:"python/python_web/django/views.md",git:{updatedTime:1631876121e3,contributors:[{name:"maxiaoteng",email:"jizhuwo00@hotmail.com",commits:1}]}}},1899:(e,s,n)=>{n.r(s),n.d(s,{default:()=>l});const a=(0,n(6252).uE)('<h1 id="views" tabindex="-1"><a class="header-anchor" href="#views" aria-hidden="true">#</a> views</h1><h2 id="_1-django-orm三种查询方法" tabindex="-1"><a class="header-anchor" href="#_1-django-orm三种查询方法" aria-hidden="true">#</a> 1. django orm三种查询方法</h2><ol><li><p>直接导入执行SQL</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    from django.db import connection  \n\n    cursor = connection.cursor()  \n    cursor.execute(&quot;insert into hello_author(name) VALUES (&#39;郭敬明&#39;)&quot;)  \n    cursor.execute(&quot;update hello_author set name=&#39;韩寒&#39; WHERE name=&#39;郭敬明&#39;&quot;)  \n    cursor.execute(&quot;delete from hello_author where name=&#39;韩寒&#39;&quot;)  \n    cursor.execute(&quot;select * from hello_author&quot;)  \n    cursor.fetchone()  \n    cursor.fetchall() \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>使用raw</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    books=Book.objects.raw(&#39;select * from hello_book&#39;)  \n    for book in books:  \n        print book  \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>使用orm方法</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># 使用extra：查询人民邮电出版社出版并且价格大于50元的书籍\nBook.objects.filter(publisher__name=&#39;人民邮电出版社&#39;).extra(where=[&#39;price&gt;50&#39;]) \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><h2 id="_2-views三种返回" tabindex="-1"><a class="header-anchor" href="#_2-views三种返回" aria-hidden="true">#</a> 2. views三种返回</h2><ol><li><p>HttpResponse()</p><ol><li>直接返回<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    from django.http import HttpResponse\n\n    def index(request):\n        return HttpResponse(&quot;欢迎访问我的博客首页！&quot;)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li>render<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    from django.shortcuts import render\n\n    def index(request):\n        post_list = Post.objects.all().order_by(&#39;-created_time&#39;)\n        context = {\n            &#39;post_list&#39;: post_list,\n            &#39;title&#39;: &#39;博客首页&#39;,\n            &#39;welcome&#39;: &#39;欢迎访问我的博客首页&#39;,\n        }\n        return render(request, &#39;blog/index.html&#39;, context=context)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ol></li><li><p>JsonResponse()</p></li><li><p>redirect(&#39;/other_url&#39;)</p></li></ol><h2 id="_3-对cookie和session的处理" tabindex="-1"><a class="header-anchor" href="#_3-对cookie和session的处理" aria-hidden="true">#</a> 3. 对cookie和session的处理</h2><ol><li><p>cookie</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>request.COOKIES.get(&#39;islogin&#39;)\nresponse.set_cookie(&#39;islogin&#39;, &#39;yes&#39;)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>session</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>在django—session表中创建一条记录:\n   session-key                                     session-data\n   ltv8zy1kh5lxj1if1fcs2pqwodumr45t                  更新数据\nelse:\n    1 生成随机字符串   ltv8zy1kh5lxj1if1fcs2pqwodumr45t\n    2 response.set_cookie(&quot;sessionid&quot;,ltv8zy1kh5lxj1if1fcs2pqwodumr45t)\n    3 在django—session表中创建一条记录:\n    session-key                                     session-data\n    ltv8zy1kh5lxj1if1fcs2pqwodumr45t       {&quot;is_login&quot;:True,&quot;username&quot;:&quot;yuan&quot;}\n\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol><h2 id="_4-request的几个属性" tabindex="-1"><a class="header-anchor" href="#_4-request的几个属性" aria-hidden="true">#</a> 4. request的几个属性</h2><ol><li>Path</li><li>method</li><li>GET</li><li>COOKIES</li><li>POST <ol><li>类似字典对象, 可以通过<code>request.POST[&#39;choice&#39;]</code>来获取post的请求参数</li></ol></li></ol>',9),l={render:function(e,s){return a}}}}]);